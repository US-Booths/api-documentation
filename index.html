<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US Booths API Documentation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div>
                <div class="logo">US Booths API</div>
                <div class="header-subtitle">Complete REST API Documentation — v1.0</div>
            </div>
            <button class="menu-toggle" id="menuToggle">Menu</button>
        </div>
    </header>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="container">
        <aside class="sidebar" id="sidebar">
            <input type="text" class="search-box" placeholder="Search endpoints..." id="searchBox">

            <div class="nav-section">
                <h3>General</h3>
                <a href="#overview" class="nav-link">Overview</a>
                <a href="#authentication" class="nav-link">Authentication</a>
                <a href="#rate-limits" class="nav-link">Rate Limits</a>
            </div>

            <div class="nav-section">
                <h3>Accesos rápidos</h3>
                <a href="#quick-dashboard" class="nav-link">Dashboard</a>
                <a href="#quick-admins" class="nav-link">Admins / Usuarios</a>
                <a href="#quick-contacts" class="nav-link">Clients / Contacts</a>
                <a href="#quick-workstations" class="nav-link">Workstations</a>
                <a href="#quick-products" class="nav-link">Products & Inventory</a>
                <a href="#quick-vendors" class="nav-link">Vendors</a>
                <a href="#quick-orders" class="nav-link">Orders</a>
                <a href="#quick-invoices" class="nav-link">Invoices</a>
                <a href="#quick-quotes" class="nav-link">Quotes & Proposals</a>
                <a href="#quick-work-orders" class="nav-link">Work Orders</a>
                <a href="#quick-chat" class="nav-link">Chat & Groups</a>
                <a href="#quick-tasks" class="nav-link">Tasks</a>
                <a href="#quick-leads" class="nav-link">Leads</a>
                <a href="#quick-companies" class="nav-link">Companies</a>
            </div>

            <div class="nav-section">
                <h3>Public API</h3>
                <a href="#public-endpoints" class="nav-link">Public Endpoints</a>
            </div>

            <div class="nav-section">
                <h3>Client</h3>
                <a href="#client-endpoints" class="nav-link">Client Endpoints</a>
            </div>

            <div class="nav-section">
                <h3>Admin Portal</h3>
                <a href="#admin-auth" class="nav-link">Auth / usuario</a>
                <a href="#admin-endpoints" class="nav-link">Admin Endpoints</a>
            </div>

            <div class="nav-section">
                <h3>Webhooks</h3>
                <a href="#webhooks" class="nav-link">External Integrations</a>
            </div>
        </aside>

        <main class="main-content">
            <section class="section" id="overview">
                <h2>Overview</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="stat-total">—</div>
                        <div class="stat-label">Total Endpoints</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">REST</div>
                        <div class="stat-label">Architecture</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">JSON</div>
                        <div class="stat-label">Format</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">v1</div>
                        <div class="stat-label">Current Version</div>
                    </div>
                </div>

                <div class="info-box success">
                    <h3>Base URL</h3>
                    <p><strong>API Base:</strong> <code>https://api.usbooths.com</code></p>
                    <p><strong>Version:</strong> <code>/api/v1/...</code></p>
                </div>

                <h3>API Statistics</h3>
                <ul id="api-stats-list">
                    <li><strong>Public Endpoints:</strong> <span id="stat-public">—</span> endpoints (no authentication required)</li>
                    <li><strong>Client Endpoints:</strong> <span id="stat-client">—</span> endpoints (throttle:client)</li>
                    <li><strong>Admin Endpoints:</strong> <span id="stat-admin">—</span> endpoints (auth:sanctum, throttle:admin)</li>
                    <li><strong>Webhook Endpoints:</strong> <span id="stat-webhooks">—</span> endpoints (external integrations)</li>
                </ul>

                <h3>Key Features</h3>
                <ul>
                    <li>Laravel Sanctum Authentication (token-based)</li>
                    <li>Comprehensive rate limiting by endpoint type</li>
                    <li>API Versioning support</li>
                    <li>Webhook integrations (QuickBooks, Twilio, GoHighLevel)</li>
                    <li>Role-based permissions system</li>
                    <li>Real-time chat and push notifications</li>
                    <li>Complete production and work order management</li>
                    <li>Multi-type inventory tracking (Fix, Dynamic, Foam)</li>
                    <li>QuickBooks, Twilio, and GoHighLevel integration</li>
                    <li>Comprehensive order and invoice management</li>
                    <li>CMS capabilities for storefront content</li>
                </ul>

                <p class="note">Note: This is auto-generated documentation from Laravel route files. Endpoints are loaded from <code>routes.js</code> — edit that file to update the list.</p>
            </section>
            <section class="section" id="authentication">
                <h2>Authentication</h2>

                <p>The API uses <strong>Laravel Sanctum</strong> for token-based authentication. Tokens are required for all admin endpoints and some client endpoints.</p>

                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/api/login</span>
                        <span class="badge public">Public</span>
                    </div>
                    <div class="description">Authenticate user and receive access token</div>

                    <h4>Request Body</h4>
                    <div class="code-block">{
  "email": "user@example.com",
  "password": "your_password"
}</div>

                    <h4>Response</h4>
                    <div class="code-block">{
  "success": true,
  "token": "1|abcdef123456...",
  "user": {
    "id": 1,
    "name": "User Name",
    "email": "user@example.com",
    "role": "admin"
  }
}</div>
                </div>

                <h3>Using Authentication Tokens</h3>
                <p>Include the token in the <code>Authorization</code> header for all authenticated requests:</p>
                <div class="code-block">Authorization: Bearer 1|abcdef123456...</div>

                <h3>Token Management</h3>
                <ul>
                    <li><strong>Logout:</strong> POST <code>/api/logout</code> (revokes current token)</li>
                    <li><strong>Get User:</strong> GET <code>/api/user</code> (returns authenticated user info)</li>
                    <li><strong>Password Reset:</strong> POST <code>/api/forgot-password</code> and <code>/api/reset-password</code></li>
                </ul>
            </section>
            <section class="section" id="rate-limits">
                <h2>Rate Limits</h2>

                <p>Rate limits are enforced to ensure API stability and fair usage across all clients.</p>

                <div class="info-box">
                    <h3>Limit Types</h3>
                    <ul>
                        <li><strong>Public Endpoints:</strong> 60 requests/minute per IP address</li>
                        <li><strong>Auth Endpoints:</strong> 10 requests/minute per IP (login/register only)</li>
                        <li><strong>Admin Endpoints:</strong> 600 requests/minute per authenticated user</li>
                        <li><strong>Client/Store Endpoints:</strong> 120 requests/minute per IP</li>
                        <li><strong>Webhook Endpoints:</strong> 120 requests/minute per IP</li>
                    </ul>
                </div>

                <h3>Rate Limit Headers</h3>
                <p>All API responses include rate limit information in headers:</p>
                <ul>
                    <li><code>X-RateLimit-Limit</code> — Maximum requests allowed</li>
                    <li><code>X-RateLimit-Remaining</code> — Requests remaining in current window</li>
                    <li><code>Retry-After</code> — Seconds until limit resets (when exceeded)</li>
                </ul>

                <div class="info-box warning">
                    <h3>Exceeded Rate Limits</h3>
                    <p>When rate limits are exceeded, the API returns <strong>HTTP 429 Too Many Requests</strong>. Wait for the time specified in <code>Retry-After</code> header before making additional requests.</p>
                </div>
            </section>

            <div id="routes-container"></div>

            <!-- Las secciones de rutas se renderizan desde routes.js -->

        </main>
    </div>

    <script src="routes.js"></script>
    <script src="app.js"></script>
</body>
</html>
